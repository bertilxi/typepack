module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function e(){this.state={}}return e.prototype.setState=function(e){var t=this;Object.entries(e).forEach(function(e){var r=e[0],n=e[1];t.state[r]=n})},e.prototype.getState=function(){return this.state},e}();t.store=new o,t.bootstrap=function(e){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];r.forEach(function(e){"object"==typeof e?t.store.setState(e):t.store.setState({arg:e})}),n.loadUserConfig(),t.store.getState().debug&&console.log(t.store.getState()),e.apply(void 0,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=n.resolve(process.cwd());t.paths={root:o,src:n.join(o,"./src"),output:n.join(o,"dist"),entry:{main:n.join(o,"./src/index.ts")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),o=r(3),s=r(1),i=r(0);t.dynamicRequire=require,t.getUserConfig=function(){var e=o.join(s.paths.root,"./typepack.ts");return n.existsSync(e)?t.dynamicRequire(e):{}},t.loadUserConfig=function(){var e=t.getUserConfig()||{};e=e.default||e,i.store.setState(e)},t.resolveHtmlTemplate=function(){for(var e=i.store.getState().htmlTemplate,t=0,r=e?[e]:["./src/index.html","./assets/index.html","./index.html"];t<r.length;t++){var u=r[t],a=o.join(s.paths.root,u);if(n.existsSync(a))return a}},t.makeDevEntry=function(e){return["13?http://localhost:"+i.store.getState().port,14,e]},t.makeDevEntries=function(e){return Object.keys(e).forEach(function(r){var n=e[r];"string"==typeof n&&(e[r]=t.makeDevEntry(n))}),e}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("webpack")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),s=r(16),i=r(6),u=[".tsx",".ts",".js",".jsx",".json"];t.default=function(){var e=o.store.getState(),t=e.env,r=e.mode,a=e.debug,l="production"!==t,c=r&&"node"===r,p={context:n.paths.root,mode:l?"development":"production",devtool:s.devtool(),entry:s.entry(),target:c?"node":"web",externals:c?[i.plugins.nodeExternals()]:[],resolve:{extensions:u},output:s.output(),optimization:s.optimization(),module:{rules:[{oneOf:s.oneOfRules()}]},plugins:[i.plugins.webpackbar(),i.plugins.friendlyErrors(),i.plugins.clean()].concat(i.loadPlugins())};return a&&(console.log(p),console.log(JSON.stringify(p))),p}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(17)),s=n(r(18)),i=n(r(19)),u=n(r(20)),a=r(3),l=n(r(21)),c=n(r(4)),p=n(r(22)),d=n(r(23)),f=r(1),m=r(0),v=r(2);t.plugins={nodeExternals:p.default,friendlyErrors:function(){return new s.default},clean:function(){return new o.default},nodemon:function(){return new u.default({script:a.join(f.paths.root,"./dist/index.js"),watch:a.join(f.paths.root,"./dist/**/*")})},terser:function(e){return new l.default(e)},webpackbar:function(){return new d.default({name:"Typepack",color:"#0052cc"})},hmr:function(){return new c.default.HotModuleReplacementPlugin},html:function(){return new i.default({filename:"index.html",template:v.resolveHtmlTemplate(),inject:!0})}},t.loadPlugins=function(){var e=m.store.getState(),r=e.env,n=e.mode,o="production"!==r,s=n&&"node"===n,i=[];return s&&o&&i.push(t.plugins.nodemon()),s||i.push(t.plugins.html()),!s&&o&&i.push(t.plugins.hmr()),i}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(27));t.Logger={log:function(e){return console.log(o.default.blue(e))},error:function(e){return console.log(o.default.red(e))},warn:function(e){return console.log(o.default.yellow(e))},exit:function(e){console.log(o.default.red(e)),process.exit(1)}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(9);var o=r(10).version,s=n(r(11)),i=r(0),u=n(r(15)),a=n(r(28));s.default("typepack").version(o).option("--debug, -d","Run CLI in debug mode").command("build").describe("Start production build").option("--env, -e","Build mode","production").action(i.bootstrap(u.default)).command("dev").describe("Start development server").option("--open, -o","Should the app be opened in the browser or not",!1).option("--port, -p","A port number to start the application",3e3).option("--env, -e","Build mode","development").action(i.bootstrap(a.default)).parse(process.argv)},function(e,t){e.exports=require("ts-node/register/transpile-only")},function(e){e.exports={name:"typepack",version:"0.3.0-test",main:"lib/cli.js",license:"MIT",homepage:"https://github.com/bertilxi/typepack",bugs:"https://github.com/bertilxi/typepack/issues",repository:{type:"git",url:"https://github.com/bertilxi/typepack.git"},keywords:["CLI","zero config","typescript","web","server"],bin:{tp:"./lib/cli.js",typepack:"./lib/cli.js"},scripts:{prebuild:"rimraf ./dist",build:"ts-node ./src/index.ts build",lint:"eslint './src/**/*.ts'","lint:fix":"eslint './src/**/*.ts' --fix"},dependencies:{autoprefixer:"^9.5.1","clean-webpack-plugin":"^2.0.1","css-loader":"^2.1.1","friendly-errors-webpack-plugin":"^1.7.0","html-loader":"^0.5.5","html-webpack-plugin":"^3.2.0","mini-css-extract-plugin":"^0.6.0","nodemon-webpack-plugin":"^4.0.8","postcss-loader":"^3.0.0",sade:"^1.4.2","style-loader":"^0.23.1","terser-webpack-plugin":"^1.2.3","ts-loader":"^5.3.3","ts-node":"^8.1.0",typescript:"^3.4.3","url-loader":"^1.1.2",webpack:"^4.30.0","webpack-dev-server":"^3.3.1","webpack-node-externals":"^1.7.2",webpackbar:"^3.1.5"},devDependencies:{"@types/node":"^11.13.4","@types/webpack":"^4.4.27","@typescript-eslint/eslint-plugin":"^1.6.0","@typescript-eslint/parser":"^1.6.0",eslint:"^5.16.0","eslint-config-prettier":"^4.1.0","eslint-plugin-prettier":"^3.0.1",fastify:"^2.2.0",prettier:"^1.17.0"}}},function(e,t){e.exports=require("sade")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("webpack-dev-server/client")},function(e,t){e.exports=require("webpack/hot/dev-server")},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(5)),s=n(r(4)),i=r(7);t.default=function(){var e=o.default();s.default(e,function(e){e&&i.Logger.exit(e.message)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),s=r(2),i=r(6),u=r(24);t.devtool=function(){var e=o.store.getState(),t=e.env;return!!e.sourceMaps&&("production"!==t?"cheap-module-eval-source-map":"source-map")},t.output=function(){var e=o.store.getState(),t=e.env,r=e.mode,s="production"!==t;return r&&"node"===r?{filename:"index.js",path:n.paths.output,libraryTarget:"commonjs2"}:{publicPath:"/",filename:s?"js/[name].js":"js/[name].[chunkhash].js",chunkFilename:s?"js/[id].js":"js/[id].[chunkhash].js",path:n.paths.output,libraryTarget:"umd",pathinfo:!1}},t.optimization=function(){var e=o.store.getState(),t=e.env,r=e.sourceMaps;return"production"!==t?{}:{removeAvailableModules:!1,removeEmptyChunks:!1,minimizer:[i.plugins.terser({cache:!0,parallel:!0,sourceMap:!!r,terserOptions:{mangle:!0,compress:!0,output:{comments:!1}}})],splitChunks:{chunks:"all"}}},t.oneOfRules=function(){var e=o.store.getState().mode;return e&&"node"===e?[u.rules.ts]:[u.rules.ts,u.rules.html,u.rules.styles,u.rules.fonts,u.rules.images,u.rules.media]},t.entry=function(){var e=o.store.getState(),t=e.env,r=e.mode;return!(r&&"node"===r)&&"production"!==t?s.makeDevEntries(n.paths.entry):n.paths.entry}},function(e,t){e.exports=require("clean-webpack-plugin")},function(e,t){e.exports=require("friendly-errors-webpack-plugin")},function(e,t){e.exports=require("html-webpack-plugin")},function(e,t){e.exports=require("nodemon-webpack-plugin")},function(e,t){e.exports=require("terser-webpack-plugin")},function(e,t){e.exports=require("webpack-node-externals")},function(e,t){e.exports=require("webpackbar")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(25),o=r(1),s=r(2);t.rules={ts:{test:/\.tsx?$/,use:[n.loaders.ts()],include:o.paths.src,exclude:/(node_modules)/},html:{test:/\.(html)$/,use:[n.loaders.html()],include:o.paths.src,exclude:/node_modules/},styles:{test:/\.css$/,use:[n.loaders.style(),n.loaders.css(),n.loaders.postcss()]},images:{test:/\.(png|svg|jpg|gif)$/,loader:s.dynamicRequire.resolve("url-loader"),options:{limit:1e4,name:"images/[name].[hash:7].[ext]"}},fonts:{test:/\.(woff|woff2|eot|ttf|otf)$/,loader:s.dynamicRequire.resolve("url-loader"),options:{limit:1e4,name:"fonts/[name].[hash:7].[ext]"}},media:{test:/\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$/,loader:s.dynamicRequire.resolve("url-loader"),options:{limit:1e4,name:"media/[name].[hash:7].[ext]"}}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),s=r(2),i=r(0),u=n(r(26));t.loaders={ts:function(){return{loader:s.dynamicRequire.resolve("ts-loader"),options:{context:o.paths.root,transpileOnly:!0,experimentalWatchApi:!0}}},html:function(){var e="production"!==i.store.getState().env;return{loader:s.dynamicRequire.resolve("html-loader"),options:{minimize:!e}}},style:function(){return{loader:"production"!==i.store.getState().env?s.dynamicRequire.resolve("style-loader"):u.default.loader}},css:function(){var e="production"!==i.store.getState().env;return{loader:s.dynamicRequire.resolve("css-loader"),options:{sourceMap:!e,importLoaders:1}}},postcss:function(){var e="production"!==i.store.getState().env;return{loader:s.dynamicRequire.resolve("postcss-loader"),options:{sourceMap:!e,plugins:[s.dynamicRequire("autoprefixer")]}}}}},function(e,t){e.exports=require("mini-css-extract-plugin")},function(e,t){e.exports=require("chalk")},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(5)),i=o(r(4)),u=r(3),a=o(r(29)),l=r(7),c=r(0),p=r(1);t.default=function(e){var t=c.store.getState(),r=t.mode,o=t.devServer,d=s.default();if("node"!==r){var f=e.port,m=e.open;d.devServer=n({},d.devServer,{contentBase:u.join(p.paths.root,"./assets"),open:m,host:"0.0.0.0",port:f,overlay:!0,inline:!0,quiet:!0,hot:!0,historyApiFallback:!0,proxy:o&&o.proxy});var v=new a.default(i.default(d),d.devServer);v.listen(f,"0.0.0.0",function(e){e&&(v.close(),l.Logger.exit(e.message))})}else i.default(d).watch({},function(e){e&&l.Logger.exit(e.message)})}},function(e,t){e.exports=require("webpack-dev-server")}]);